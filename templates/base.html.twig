<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}{% endblock %} Gestion reclamation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
        <link rel="icon" href="{{asset('assets/img/kaiadmin/favicon.ico')}}" type="image/x-icon" />
        <link rel="stylesheet" href="{{asset('assets/css/bootstrap.min.css')}}" />
        <link rel="stylesheet" href="{{asset('assets/css/plugins.min.css')}}" />
        <link rel="stylesheet" href="{{asset('assets/css/kaiadmin.min.css')}}" />
        <link rel="stylesheet" href="{{asset('assets/css/demo.css')}}" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
        
        <style>
            body, .main-panel, .page-inner, .content {
                background-color: white !important;
            }
            
            .sidebar {
                background-color: #1a2035 !important;
            }
            
            /* Styles pour les notifications */
            .notifications-container {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 9999;
                max-width: 350px;
            }
            
            .notification-item {
                transition: opacity 0.5s ease-in-out;
                margin-bottom: 10px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                border: none;
            }
            
            .notification-success {
                background-color: #d1e7dd;
                color: #0f5132;
            }
            
            .notification-error {
                background-color: #f8d7da;
                color: #842029;
            }
            
            .notification-warning {
                background-color: #fff3cd;
                color: #664d03;
            }
            
            .notification-info {
                background-color: #cff4fc;
                color: #055160;
            }
        </style>

        {% block stylesheets %}
        {% endblock %}
    </head>
    <body style="background-color: white;">
        <div class="wrapper">
            <!-- Votre sidebar et contenu existant... -->
            
            <div class="main-panel" style="background-color: white;">
                <div class="content">
                    <div class="page-inner" style="background-color: white;">
                        {% block body %}{% endblock %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifications System -->
        <div class="notifications-container">
            {% for type, messages in app.flashes %}
                {% for message in messages %}
                    <div class="notification-item alert notification-{{ type }} alert-dismissible fade show" role="alert" data-auto-dismiss="3000">
                        <div class="d-flex align-items-center">
                            <i class="fas 
                                {% if type == 'success' %}fa-check-circle{% endif %}
                                {% if type == 'danger' %}fa-exclamation-circle{% endif %}
                                {% if type == 'warning' %}fa-exclamation-triangle{% endif %}
                                {% if type == 'info' %}fa-info-circle{% endif %}
                                me-2"></i>
                            <span>{{ message }}</span>
                            <button type="button" class="btn-close ms-3" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    </div>
                {% endfor %}
            {% endfor %}
        </div>

        <!-- Scripts -->
        <script src="{{asset('assets/js/core/jquery-3.7.1.min.js')}}"></script>
        <script src="{{asset('assets/js/core/popper.min.js')}}"></script>
        <script src="{{asset('assets/js/core/bootstrap.min.js')}}"></script>
        <script src="{{asset('assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js')}}"></script>
        <script src="{{asset('assets/js/kaiadmin.min.js')}}"></script>
        
        <script>
            // Auto-dismiss notifications
            document.addEventListener('DOMContentLoaded', function() {
                const notifications = document.querySelectorAll('[data-auto-dismiss]');
                
                notifications.forEach(notification => {
                    const delay = parseInt(notification.getAttribute('data-auto-dismiss'));
                    setTimeout(() => {
                        const bsAlert = bootstrap.Alert.getOrCreateInstance(notification);
                        bsAlert.close();
                    }, delay);
                });
            });
        </script>

        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </body>
</html>